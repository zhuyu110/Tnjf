(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shop/shop"],{3498:function(t,e,o){},"448b":function(t,e,o){"use strict";(function(t){o("6947");n(o("66fd"));var e=n(o("84c2"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},"4c2c":function(t,e,o){"use strict";o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return s})),o.d(e,"a",(function(){return n}));var n={guiPage:function(){return o.e("GraceUI5/components/gui-page").then(o.bind(null,"55c2"))},guiModal:function(){return o.e("GraceUI5/components/gui-modal").then(o.bind(null,"7e3c"))},guiImage:function(){return o.e("GraceUI5/components/gui-image").then(o.bind(null,"356c"))},guiStepBox:function(){return o.e("GraceUI5/components/gui-step-box").then(o.bind(null,"8ce8"))},guiSearch:function(){return o.e("GraceUI5/components/gui-search").then(o.bind(null,"2bdd"))}},i=function(){var t=this,e=t.$createElement;t._self._c},s=[]},"84c2":function(t,e,o){"use strict";o.r(e);var n=o("4c2c"),i=o("d12b");for(var s in i)"default"!==s&&function(t){o.d(e,t,(function(){return i[t]}))}(s);o("ddd7");var a,c=o("f0c5"),r=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);e["default"]=r.exports},9379:function(t,e,o){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o("be96"),s=(o("c504"),{data:function(){return{isVip:!1,baseAmount:1,imgURL:"",dialogTitle:"完善信息",dialogContent:"完善店铺信息？",confirmTxt:"确定",product:{},addressList:[],address:[],addressIndex:0,pageLoading:!0,mainHeight:300,leftTo:"cate",isLeftTap:!1,mainCate:[],currentCateIndex:1,scrollTimer:null,productListTo:""}},onLoad:function(){var e=this;i.getRefs("guiPage",this,0,(function(o){o.getDomSize("guiPageBody",(function(o){console.log(o),e.mainHeight=o.height-t.upx2px(110),setTimeout((function(){e.pageLoading=!1}),1e3)}))})),this.getProducts()},onShow:function(){var e=this;this.isVip=t.getStorageSync("isVip");var o=t.getStorageSync("addressList");""==o&&(o=[],this.address=[]),this.imgURL=this.imgUrl,this.addressList=o,this.addressList.forEach((function(t){e.address.push(t.name+t.area+t.address+t.phoneno)}))},methods:{registVIP:function(){console.log("注册vip"),n.isLogin()?n.business()?(this.confirmTxt="充值",this.dialogTitle="注册会员",this.dialogContent="确定充值1元成为会员吗?"):(this.dialogTitle="完善信息",this.dialogContent="完善店铺信息？",this.confirmTxt="确定"):i.navigate("../login/login"),this.$refs.guimodal2.open()},getProducts:function(){var e=this;t.gRequest.get("jf/goods/getJfGoodsListNologin",{},(function(t){console.log("get 异步请求成功"),console.log(t),e.mainCate=t.result}),(function(t){console.log(t)}),(function(e){t.hideLoading()}))},change:function(t){console.log(t[0]),this.baseAmount=t[0]},pickerChange:function(t){console.log(t),this.addressIndex=t.detail.value},close1:function(){this.$refs.guimodal1.close()},confirm1:function(){var e=this;if(this.address.length<=0)return i.showLoading("请选择收货地址！"),void setTimeout((function(){t.hideLoading()}),1e3);var o=this;i.showLoading("上传订单中！"),t.gRequest.post("jfOrder/orderSubmit",{data:{goodsId:o.product.id,baseNum:o.baseAmount,baseAmount:o.product.pricepoints*o.baseAmount,sendAddress:o.address[o.addressIndex]}},(function(o){console.log("post 异步请求成功"),console.log(o),"SUCCESS"==o.status?(t.hideLoading(),e.$refs.guimodal1.close()):(console.log("fail="+o.errorMsg),i.showLoading(o.errorMsg),setTimeout((function(){t.hideLoading()}),1e3))}),(function(t){console.log(t)}),(function(t){}))},close2:function(){this.$refs.guimodal2.close()},confirm2:function(){"充值"==this.confirmTxt?t.gRequest.get("jfPay/payVip",{},(function(e){console.log("post 异步请求成功"),console.log(e);var o=e.result.id;if("SUCCESS"==e.status){var n=e.result.zfReturn,i=JSON.parse(n);t.requestPayment({provider:"wxpay",timeStamp:i.timeStamp,nonceStr:i.nonce_str,package:"prepay_id="+i.prepay_id,signType:"MD5",paySign:i.paySign,success:function(e){t.gRequest.post("jfPay/successCallbackByVip",{data:{id:o}},(function(e){console.log("post 异步请求成功"),console.log(e),t.setStorageSync("isVip",!0)}),(function(t){console.log(t)}),(function(e){t.hideLoading()})),console.log("success:"+JSON.stringify(e))},fail:function(e){t.gRequest.post("jfPay/errorCallbackByVip",{data:{id:o}},(function(t){console.log("post 异步请求成功"),console.log(t)}),(function(t){console.log(t)}),(function(e){t.hideLoading()})),console.log("fail:"+JSON.stringify(e))}})}}),(function(t){console.log(t)}),(function(e){t.hideLoading()})):i.navigate("../regist/regist_vip"),this.$refs.guimodal2.close()},submit:function(t){if(console.log(t),n.isLogin()){n.business()?(this.baseAmount=1,this.$refs.guimodal1.open()):this.$refs.guimodal2.open();t.currentTarget.dataset.productid;this.product=t.currentTarget.dataset.product}else i.navigate("../login/login")},changCate:function(t){var e=this;this.isLeftTap=!0;var o=t.currentTarget.dataset.cateid;this.currentCateIndex=o,1==o?(this.productListTo="productList2",this.$nextTick((function(){e.productListTo="productList"+o}))):this.productListTo="productList"+o,setTimeout((function(){e.isLeftTap=!1}),3e3)},rscroll:function(t){var e=this;this.isLeftTap||(null!=this.scrollTimer&&clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout((function(){e.getIndex()}),100))},getIndex:function(e){var o=this,n=t.createSelectorQuery();n.selectAll(".gui-cate-product-list").boundingClientRect(),n.selectViewport().scrollOffset(),n.exec((function(t){for(var e=t[0],n=0;n<e.length;n++)if(e[n].top>0&&e[n].top>=o.mainHeight/2){o.currentCateIndex=e[n].dataset.parentid,o.leftTo="cate"+e[n].dataset.parentid;break}console.log(o.leftTo)}))},search:function(t){var e=t,o=-1;for(var n in this.mainCate){for(var i=0;i<this.mainCate[n].jfGoodsVOList.length;i++){if(-1!=this.mainCate[n].jfGoodsVOList[i].goodsName.indexOf(e)){o=this.mainCate[n].jfGoodsVOList[i].id;break}0}if(-1!=o)break}-1!=o&&(this.productListTo="products"+o)}}});e.default=s}).call(this,o("543d")["default"],o("c8ba"))},d12b:function(t,e,o){"use strict";o.r(e);var n=o("9379"),i=o.n(n);for(var s in n)"default"!==s&&function(t){o.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a},ddd7:function(t,e,o){"use strict";var n=o("3498"),i=o.n(n);i.a}},[["448b","common/runtime","common/vendor"]]]);